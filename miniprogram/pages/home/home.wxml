<view class="container">
  <view class="date-header">
    <text class="date-text">{{todayDisplay}} 菜品</text>
  </view>

  <view wx:if="{{loading}}" class="loading-wrap">
    <view class="loading-text">加载中...</view>
  </view>

  <block wx:else>
    <!-- 早餐 -->
    <view class="section">
      <view class="section-title">🌅 早餐</view>
      <block wx:if="{{breakfastDishes.length > 0}}">
        <dish-card
          wx:for="{{breakfastDishes}}"
          wx:key="_id"
          dish="{{item}}"
          bind:dishtap="onDishTap"
        />
      </block>
      <empty-state wx:else message="今日早餐菜品暂未录入" />
    </view>

    <!-- 午餐 -->
    <view class="section">
      <view class="section-header">
        <view class="section-title">☀️ 午餐</view>
        <view class="subscribe-btn {{lunchSubscribed ? 'subscribed' : ''}}" data-meal="lunch" bindtap="onSubscribeTap">
          <text>{{lunchSubscribed ? '✓ 已订阅' : '🔔 订阅提醒'}}</text>
        </view>
      </view>
      <block wx:if="{{lunchDishes.length > 0}}">
        <dish-card
          wx:for="{{lunchDishes}}"
          wx:key="_id"
          dish="{{item}}"
          bind:dishtap="onDishTap"
        />
      </block>
      <empty-state wx:else message="今日午餐菜品暂未录入" />
    </view>

    <!-- 晚餐 -->
    <view class="section">
      <view class="section-header">
        <view class="section-title">🌙 晚餐</view>
        <view class="subscribe-btn {{dinnerSubscribed ? 'subscribed' : ''}}" data-meal="dinner" bindtap="onSubscribeTap">
          <text>{{dinnerSubscribed ? '✓ 已订阅' : '🔔 订阅提醒'}}</text>
        </view>
      </view>
      <block wx:if="{{dinnerDishes.length > 0}}">
        <dish-card
          wx:for="{{dinnerDishes}}"
          wx:key="_id"
          dish="{{item}}"
          bind:dishtap="onDishTap"
        />
      </block>
      <empty-state wx:else message="今日晚餐菜品暂未录入" />
    </view>
  </block>
</view>
